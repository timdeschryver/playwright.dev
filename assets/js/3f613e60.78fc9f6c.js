"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[60526],{10346:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return k},default:function(){return d}});var r=a(87462),o=a(63366),i=(a(67294),a(3905)),n=(a(26396),a(58215),["components"]),l={id:"class-websocket",title:"WebSocket"},s=void 0,c={unversionedId:"api/class-websocket",id:"version-1.17/api/class-websocket",isDocsHomePage:!1,title:"WebSocket",description:"The [WebSocket] class represents websocket connections in the page.",source:"@site/versioned_docs/version-1.17/api/class-websocket.mdx",sourceDirName:"api",slug:"/api/class-websocket",permalink:"/docs/1.17/api/class-websocket",tags:[],version:"1.17",frontMatter:{id:"class-websocket",title:"WebSocket"},sidebar:"version-1.17/api",previous:{title:"Video",permalink:"/docs/1.17/api/class-video"},next:{title:"Worker",permalink:"/docs/1.17/api/class-worker"}},k=[{value:"webSocket.on(&#39;close&#39;)",id:"web-socket-event-close",children:[],level:2},{value:"webSocket.on(&#39;framereceived&#39;)",id:"web-socket-event-frame-received",children:[],level:2},{value:"webSocket.on(&#39;framesent&#39;)",id:"web-socket-event-frame-sent",children:[],level:2},{value:"webSocket.on(&#39;socketerror&#39;)",id:"web-socket-event-socket-error",children:[],level:2},{value:"webSocket.isClosed()",id:"web-socket-is-closed",children:[],level:2},{value:"webSocket.url()",id:"web-socket-url",children:[],level:2},{value:"webSocket.waitForEvent(event, optionsOrPredicate, options)",id:"web-socket-wait-for-event",children:[],level:2}],p={toc:k};function d(e){var t=e.components,a=(0,o.Z)(e,n);return(0,i.kt)("wrapper",(0,r.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The ",(0,i.kt)("a",{parentName:"p",href:"/docs/1.17/api/class-websocket",title:"WebSocket"},"WebSocket")," class represents websocket connections in the page."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/1.17/api/class-websocket#web-socket-event-close"},"webSocket.on('close')")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/1.17/api/class-websocket#web-socket-event-frame-received"},"webSocket.on('framereceived')")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/1.17/api/class-websocket#web-socket-event-frame-sent"},"webSocket.on('framesent')")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/1.17/api/class-websocket#web-socket-event-socket-error"},"webSocket.on('socketerror')")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/1.17/api/class-websocket#web-socket-is-closed"},"webSocket.isClosed()")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/1.17/api/class-websocket#web-socket-url"},"webSocket.url()")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/1.17/api/class-websocket#web-socket-wait-for-event"},"webSocket.waitForEvent(event[, optionsOrPredicate, options])"))),(0,i.kt)("h2",{id:"web-socket-event-close"},"webSocket.on('close')"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"type: ","<",(0,i.kt)("a",{parentName:"li",href:"/docs/1.17/api/class-websocket",title:"WebSocket"},"WebSocket"),">")),(0,i.kt)("p",null,"Fired when the websocket closes."),(0,i.kt)("h2",{id:"web-socket-event-frame-received"},"webSocket.on('framereceived')"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"type: ","<",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",title:"Object"},"Object"),">",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"payload")," ","<",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string"},"string"),"|",(0,i.kt)("a",{parentName:"li",href:"https://nodejs.org/api/buffer.html#buffer_class_buffer",title:"Buffer"},"Buffer"),">"," frame payload")))),(0,i.kt)("p",null,"Fired when the websocket receives a frame."),(0,i.kt)("h2",{id:"web-socket-event-frame-sent"},"webSocket.on('framesent')"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"type: ","<",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",title:"Object"},"Object"),">",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"payload")," ","<",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string"},"string"),"|",(0,i.kt)("a",{parentName:"li",href:"https://nodejs.org/api/buffer.html#buffer_class_buffer",title:"Buffer"},"Buffer"),">"," frame payload")))),(0,i.kt)("p",null,"Fired when the websocket sends a frame."),(0,i.kt)("h2",{id:"web-socket-event-socket-error"},"webSocket.on('socketerror')"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"type: ","<",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string"},"String"),">")),(0,i.kt)("p",null,"Fired when the websocket has an error."),(0,i.kt)("h2",{id:"web-socket-is-closed"},"webSocket.isClosed()"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"returns:",(0,i.kt)("a",{"aria-hidden":"true",tabindex:"-1",class:"list-anchor-link",id:"web-socket-is-closed-return"})," ","<",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type",title:"Boolean"},"boolean"),">",(0,i.kt)("a",{href:"#web-socket-is-closed-return",class:"list-anchor"},"#"))),(0,i.kt)("p",null,"Indicates that the web socket has been closed."),(0,i.kt)("h2",{id:"web-socket-url"},"webSocket.url()"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"returns:",(0,i.kt)("a",{"aria-hidden":"true",tabindex:"-1",class:"list-anchor-link",id:"web-socket-url-return"})," ","<",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string"},"string"),">",(0,i.kt)("a",{href:"#web-socket-url-return",class:"list-anchor"},"#"))),(0,i.kt)("p",null,"Contains the URL of the WebSocket."),(0,i.kt)("h2",{id:"web-socket-wait-for-event"},"webSocket.waitForEvent(event","[, optionsOrPredicate, options]",")"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"event"),(0,i.kt)("a",{"aria-hidden":"true",tabindex:"-1",class:"list-anchor-link",id:"web-socket-wait-for-event-option-event"})," ","<",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type",title:"string"},"string"),">"," Event name, same one would pass into ",(0,i.kt)("inlineCode",{parentName:"li"},"webSocket.on(event)"),".",(0,i.kt)("a",{href:"#web-socket-wait-for-event-option-event",class:"list-anchor"},"#")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"optionsOrPredicate"),(0,i.kt)("a",{"aria-hidden":"true",tabindex:"-1",class:"list-anchor-link",id:"web-socket-wait-for-event-option-options-or-predicate"})," ","<",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",title:"Function"},"function"),"|",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",title:"Object"},"Object"),">"," Either a predicate that receives an event or an options object. Optional.",(0,i.kt)("a",{href:"#web-socket-wait-for-event-option-options-or-predicate",class:"list-anchor"},"#"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"predicate")," ","<",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",title:"Function"},"function"),">"," receives the event data and resolves to truthy value when the waiting should resolve."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"timeout")," ","<",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type",title:"Number"},"number"),">"," maximum time to wait for in milliseconds. Defaults to ",(0,i.kt)("inlineCode",{parentName:"li"},"30000")," (30 seconds). Pass ",(0,i.kt)("inlineCode",{parentName:"li"},"0")," to disable timeout. The default value can be changed by using the ",(0,i.kt)("a",{parentName:"li",href:"/docs/1.17/api/class-browsercontext#browser-context-set-default-timeout"},"browserContext.setDefaultTimeout(timeout)"),"."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"options")," ","<",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",title:"Object"},"Object"),">",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"predicate"),(0,i.kt)("a",{"aria-hidden":"true",tabindex:"-1",class:"list-anchor-link",id:"web-socket-wait-for-event-option-predicate"})," ","<",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",title:"Function"},"function"),">"," Receives the event data and resolves to truthy value when the waiting should resolve.",(0,i.kt)("a",{href:"#web-socket-wait-for-event-option-predicate",class:"list-anchor"},"#")))),(0,i.kt)("li",{parentName:"ul"},"returns:",(0,i.kt)("a",{"aria-hidden":"true",tabindex:"-1",class:"list-anchor-link",id:"web-socket-wait-for-event-return"})," ","<",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise"},"Promise"),"<",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",title:"Object"},"Object"),">",">",(0,i.kt)("a",{href:"#web-socket-wait-for-event-return",class:"list-anchor"},"#"))),(0,i.kt)("p",null,"Waits for event to fire and passes its value into the predicate function. Returns when the predicate returns truthy value. Will throw an error if the webSocket is closed before the event is fired. Returns the event data value."))}d.isMDXComponent=!0}}]);